<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网页文件互传工具</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>📁 网页文件互传工具</h1>
            <p class="subtitle">P2P文件传输，无需服务器中转</p>
        </header>

        <main>
            <section class="connection-panel">
                <h2>连接设置</h2>
                <div class="connection-mode">
                    <button id="createRoomBtn" class="btn btn-primary">
                        🏠 创建房间
                    </button>
                    <span class="divider">或</span>
                    <button id="joinRoomBtn" class="btn btn-secondary">
                        🚪 加入房间
                    </button>
                </div>

                <div id="roomInfo" class="room-info hidden">
                    <div class="info-item">
                        <label>房间ID：</label>
                        <span id="roomId"></span>
                        <button id="copyRoomId" class="btn-small" title="复制房间ID">📋</button>
                    </div>
                    <div class="info-item">
                        <label>状态：</label>
                        <span id="connectionStatus" class="status waiting">等待连接...</span>
                    </div>
                </div>

                <div id="joinForm" class="join-form hidden">
                    <div class="form-group">
                        <label for="roomIdInput">输入房间ID：</label>
                        <input type="text" id="roomIdInput" placeholder="粘贴房间ID">
                    </div>
                    <button id="confirmJoin" class="btn btn-primary">确认加入</button>
                </div>

                <div id="peerInfo" class="peer-info hidden">
                    <p>✅ 对方已连接！可以开始传输文件了。</p>
                </div>
            </section>

            <section id="transferPanel" class="transfer-panel hidden">
                <h2>📤 发送文件</h2>
                <div class="file-input-area">
                    <input type="file" id="fileInput" multiple>
                    <label for="fileInput" class="file-label">
                        <span class="icon">📎</span>
                        <span>选择文件或拖拽文件到此处</span>
                    </label>
                </div>

                <div id="fileList" class="file-list"></div>

                <button id="sendFilesBtn" class="btn btn-send hidden">
                    🚀 开始发送
                </button>
            </section>

            <section id="receivePanel" class="receive-panel hidden">
                <h2>📥 接收文件</h2>
                <div id="incomingFiles" class="incoming-files">
                    <p class="empty-tip">暂无接收文件</p>
                </div>
            </section>

            <section class="transfer-progress hidden">
                <h2>📊 传输进度</h2>
                <div id="progressList" class="progress-list"></div>
            </section>

            <section class="history-panel">
                <h2>📋 传输历史</h2>
                <div id="transferHistory" class="history-list">
                    <p class="empty-tip">暂无传输记录</p>
                </div>
                <button id="clearHistory" class="btn btn-small hidden">清空历史</button>
            </section>
        </main>

        <footer>
            <p>💡 提示：文件通过P2P直接传输，不经过服务器，更快更安全！</p>
        </footer>
    </div>

    <div id="toast" class="toast hidden"></div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
