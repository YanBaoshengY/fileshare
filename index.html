<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>发个东西 - 局域网传输 - v1.1.2</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="tab-nav">
        <div class="tab-nav-inner">
            <div class="tab-item active" data-tab="welcome">
                <span class="tab-icon">🏠</span>
                <span class="tab-text">首页</span>
            </div>
            <div class="tab-item" data-tab="file">
                <span class="tab-icon">📁</span>
                <span class="tab-text">文件</span>
            </div>
            <div class="tab-item" data-tab="message">
                <span class="tab-icon">💬</span>
                <span class="tab-text">消息</span>
            </div>
            <div class="tab-item" data-tab="settings">
                <span class="tab-icon">⚙️</span>
                <span class="tab-text">设置</span>
            </div>
            <div class="tab-item" data-tab="history">
                <span class="tab-icon">📋</span>
                <span class="tab-text">历史</span>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- 欢迎/介绍页面 -->
        <div class="tab-content active" id="welcome-content">
            <div class="welcome-page">
                <div class="welcome-logo">📤</div>
                <h1 class="welcome-title">发个东西</h1>
                <p class="welcome-subtitle">局域网文件传输工具</p>
                
                <div class="welcome-features">
                    <div class="feature-item">
                        <div class="feature-icon">🔒</div>
                        <div class="feature-text">安全可靠</div>
                        <div class="feature-desc">点对点传输，数据不经服务器</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">⚡</div>
                        <div class="feature-text">快速便捷</div>
                        <div class="feature-desc">局域网内速传</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">📱</div>
                        <div class="feature-text">多设备支持</div>
                        <div class="feature-desc">手机平板电脑都能用</div>
                    </div>
                </div>

                <div class="welcome-action">
                    <button class="btn btn-primary btn-large" id="startBtn">开始使用</button>
                </div>

                <div class="welcome-usage">
                    <h3>使用方法</h3>
                    <ol>
                        <li>点击开始使用或导航栏设置按钮</li>
                        <li>房主"创建房间"，获得房间号</li>
                        <li>其余设备"加入房间"输入房间号</li>
                        <li>即可相互发送文件和消息</li>
                        <li>传输速率由网络决定</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- 文件传输页面 -->
        <div class="tab-content" id="file-content">
            <div class="page-header">
                <h2>📁 文件传输</h2>
            </div>
            <div class="send-target-selector">
                <div class="target-label">发送给：</div>
                <div class="target-options">
                    <label class="target-option">
                        <input type="radio" name="fileTarget" value="room" checked>
                        <span class="target-radio"></span>
                        <span class="target-text">全房间</span>
                    </label>
                    <label class="target-option">
                        <input type="radio" name="fileTarget" value="specific">
                        <span class="target-radio"></span>
                        <span class="target-text">选择设备</span>
                    </label>
                </div>
                <div id="fileTargetDevices" class="target-devices hidden">
                    <div class="target-devices-title">选择接收设备</div>
                    <div id="fileTargetDevicesList" class="target-devices-list"></div>
                </div>
            </div>
            <div class="file-drop-zone" id="dropZone">
                <div class="icon">📁</div>
                <div class="text">松开发送文件</div>
                <div class="subtext">点击或拖拽文件到此处</div>
            </div>
            <input type="file" id="fileInput" class="file-input" multiple>
            <div id="fileList" class="file-list"></div>
            <button id="sendFilesBtn" class="btn btn-primary hidden">发送文件</button>
            <div class="progress-section hidden">
                <div class="section-title">
                    <span>传输进度</span>
                    <button id="clearProgressBtn" class="btn-clear">清除</button>
                </div>
                <div id="progressList" class="progress-list"></div>
            </div>
        </div>

        <!-- 消息页面 -->
        <div class="tab-content" id="message-content">
            <div class="page-header">
                <h2>💬 消息</h2>
            </div>
            <div class="send-target-selector">
                <div class="target-label">发送给：</div>
                <div class="target-options">
                    <label class="target-option">
                        <input type="radio" name="messageTarget" value="room" checked>
                        <span class="target-radio"></span>
                        <span class="target-text">全房间</span>
                    </label>
                    <label class="target-option">
                        <input type="radio" name="messageTarget" value="specific">
                        <span class="target-radio"></span>
                        <span class="target-text">选择设备</span>
                    </label>
                </div>
                <div id="messageTargetDevices" class="target-devices hidden">
                    <div class="target-devices-title">选择接收设备</div>
                    <div id="messageTargetDevicesList" class="target-devices-list"></div>
                </div>
            </div>
            <div id="messagesList" class="messages-list">
                <div class="empty-tip">暂无消息</div>
            </div>
            <div class="message-input-area">
                <textarea id="messageInput" placeholder="输入消息..." rows="1"></textarea>
                <button id="sendMessageBtn" class="btn btn-primary">发送</button>
            </div>
        </div>

        <!-- 设置页面 -->
        <div class="tab-content" id="settings-content">
            <div class="page-header">
                <h2>⚙️ 设置</h2>
            </div>
            
            <!-- 房间信息 -->
            <div class="settings-section">
                <div class="room-section">
                    <div id="roomDisplay" class="room-display">
                        <div class="room-label">房间号</div>
                        <div class="room-id" id="roomId">------</div>
                        <div class="status waiting" id="connectionStatus">等待连接</div>
                    </div>
                    <div class="room-actions">
                        <button id="createRoomBtn" class="btn btn-primary">创建房间</button>
                        <button id="joinRoomBtn" class="btn btn-secondary">加入房间</button>
                    </div>
                    <div class="room-actions room-actions-secondary">
                        <button id="disconnectBtn" class="btn btn-danger hidden">断开连接</button>
                    </div>
                    <div id="joinForm" class="join-form">
                        <input type="text" id="roomIdInput" placeholder="输入房间号后4位" maxlength="4">
                        <button id="confirmJoinBtn" class="btn btn-primary" style="margin-top: 10px;">确认加入</button>
                    </div>
                </div>
            </div>

            <!-- 设备列表 -->
            <div class="settings-section">
                <div id="devicesList" class="devices-section">
                    <div class="devices-title">房间内的设备</div>
                    <div id="devicesListContent" class="devices-list-content"></div>
                </div>
            </div>

            <!-- 昵称设置 -->
            <div class="settings-section">
                <div class="form-group">
                    <label>昵称</label>
                    <input type="text" id="nicknameInput" class="nickname-input" placeholder="输入昵称" maxlength="20">
                </div>
            </div>
        </div>

        <!-- 历史记录页面 -->
        <div class="tab-content" id="history-content">
            <div class="page-header">
                <h2>📋 历史记录</h2>
            </div>
            <div id="transferHistory" class="history-list">
                <div class="empty-tip">暂无记录</div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast hidden"></div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="app.js"></script>
    <footer class="footer">
        <p>Copyright © 2026 YanBaosheng</p>
    </footer>
</body>
</html>
